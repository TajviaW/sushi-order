<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ£ Build Your Sushi Roll</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
    min-height: 100vh;
    color: #fff;
    padding: 20px;
  }

  h1 {
    text-align: center;
    font-size: 2.2rem;
    margin-bottom: 8px;
    text-shadow: 2px 2px 10px rgba(0,0,0,0.5);
  }

  .subtitle {
    text-align: center;
    font-size: 1rem;
    color: #aaa;
    margin-bottom: 24px;
  }

  .name-section {
    max-width: 500px;
    margin: 0 auto 24px auto;
    text-align: center;
  }

  .name-section input {
    width: 100%;
    max-width: 400px;
    padding: 14px 20px;
    border-radius: 30px;
    border: 2px solid #e94560;
    background: rgba(255,255,255,0.07);
    color: #fff;
    font-size: 1.1rem;
    text-align: center;
    outline: none;
    transition: border-color 0.3s, box-shadow 0.3s;
  }

  .name-section input::placeholder { color: #888; }
  .name-section input:focus {
    border-color: #ff6b6b;
    box-shadow: 0 0 15px rgba(233,69,96,0.4);
  }

  .category {
    max-width: 900px;
    margin: 0 auto 28px auto;
  }

  .category h2 {
    font-size: 1.4rem;
    margin-bottom: 12px;
    padding-left: 8px;
    border-left: 4px solid #e94560;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .category h2 .badge {
    background: #e94560;
    color: #fff;
    font-size: 0.7rem;
    padding: 2px 10px;
    border-radius: 20px;
    font-weight: normal;
  }

  .options-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 10px;
  }

  .option-card {
    background: rgba(255,255,255,0.06);
    border: 2px solid transparent;
    border-radius: 16px;
    padding: 16px 10px;
    text-align: center;
    cursor: pointer;
    transition: all 0.25s ease;
    user-select: none;
    -webkit-user-select: none;
    position: relative;
  }

  .option-card:hover {
    background: rgba(255,255,255,0.1);
    transform: translateY(-2px);
  }

  .option-card.selected {
    border-color: #e94560;
    background: rgba(233,69,96,0.15);
    box-shadow: 0 0 20px rgba(233,69,96,0.3);
  }

  .option-card .emoji {
    font-size: 2rem;
    display: block;
    margin-bottom: 6px;
  }

  .option-card .label {
    font-size: 0.85rem;
    color: #ddd;
    line-height: 1.2;
  }

  .option-card.selected .label { color: #fff; font-weight: 600; }

  .option-card .checkmark {
    position: absolute;
    top: 6px;
    right: 8px;
    background: #e94560;
    color: #fff;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    font-size: 0.7rem;
    display: none;
    align-items: center;
    justify-content: center;
  }

  .option-card.selected .checkmark { display: flex; }

  .submit-section {
    text-align: center;
    margin: 30px auto;
  }

  .submit-btn {
    background: linear-gradient(135deg, #e94560, #c23152);
    color: #fff;
    border: none;
    padding: 16px 60px;
    font-size: 1.2rem;
    border-radius: 40px;
    cursor: pointer;
    transition: all 0.3s;
    box-shadow: 0 4px 20px rgba(233,69,96,0.4);
    position: relative;
    overflow: hidden;
  }

  .submit-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 30px rgba(233,69,96,0.6);
  }

  .submit-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
  }

  .submit-btn .spinner {
    display: none;
    width: 20px;
    height: 20px;
    border: 3px solid rgba(255,255,255,0.3);
    border-top-color: #fff;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    margin: 0 auto;
  }

  .submit-btn.loading .btn-text { display: none; }
  .submit-btn.loading .spinner { display: inline-block; }

  @keyframes spin { to { transform: rotate(360deg); } }

  /* Confirmation Overlay */
  .overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.7);
    z-index: 100;
    align-items: center;
    justify-content: center;
    padding: 20px;
  }

  .overlay.active { display: flex; }

  .confirm-box {
    background: linear-gradient(135deg, #16213e, #1a1a2e);
    border: 2px solid #e94560;
    border-radius: 20px;
    padding: 30px;
    max-width: 500px;
    width: 100%;
    text-align: center;
    animation: popIn 0.3s ease;
  }

  @keyframes popIn {
    from { transform: scale(0.8); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }

  .confirm-box h2 { margin-bottom: 16px; font-size: 1.6rem; }

  .confirm-box .order-detail {
    text-align: left;
    background: rgba(255,255,255,0.05);
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 20px;
    font-size: 0.95rem;
    line-height: 1.8;
  }

  .confirm-box .order-detail span.label {
    color: #e94560;
    font-weight: 600;
    display: inline;
    font-size: 0.95rem;
  }

  .close-btn {
    background: #e94560;
    color: #fff;
    border: none;
    padding: 12px 40px;
    font-size: 1rem;
    border-radius: 30px;
    cursor: pointer;
    transition: background 0.3s;
  }

  .close-btn:hover { background: #ff6b6b; }

  .status-msg {
    margin-top: 12px;
    font-size: 0.85rem;
    color: #4ecdc4;
  }

  .status-msg.error { color: #ff6b6b; }

  /* Responsive */
  @media (max-width: 600px) {
    h1 { font-size: 1.6rem; }
    .options-grid { grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); gap: 8px; }
    .option-card { padding: 12px 8px; }
    .option-card .emoji { font-size: 1.6rem; }
    .option-card .label { font-size: 0.75rem; }
  }
</style>
</head>
<body>

<h1>ğŸ£ Build Your Sushi Roll</h1>
<p class="subtitle">Select your ingredients and submit your order!</p>

<!-- Student Name -->
<div class="name-section">
  <input type="text" id="studentName" placeholder="Enter your name..." />
</div>

<!-- Rice -->
<div class="category" id="cat-rice">
  <h2>ğŸš Rice <span class="badge">Pick 1</span></h2>
  <div class="options-grid" data-type="single">
    <div class="option-card" data-value="White Sushi Rice"><span class="emoji">â¬œ</span><span class="label">White Sushi Rice</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Brown Rice"><span class="emoji">ğŸŸ«</span><span class="label">Brown Rice</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Cauliflower Rice"><span class="emoji">ğŸ¥¦</span><span class="label">Cauliflower Rice</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="No Rice"><span class="emoji">ğŸš«</span><span class="label">No Rice</span><span class="checkmark">âœ“</span></div>
  </div>
</div>

<!-- Wrap -->
<div class="category" id="cat-wrap">
  <h2>ğŸŒ¿ Wrap <span class="badge">Pick 1</span></h2>
  <div class="options-grid" data-type="single">
    <div class="option-card" data-value="Nori (Seaweed)"><span class="emoji">ğŸŸ¢</span><span class="label">Nori (Seaweed)</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Soy Paper"><span class="emoji">ğŸ“„</span><span class="label">Soy Paper</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Cucumber Wrap"><span class="emoji">ğŸ¥’</span><span class="label">Cucumber Wrap</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Tortilla Fusion"><span class="emoji">ğŸ«”</span><span class="label">Tortilla Fusion</span><span class="checkmark">âœ“</span></div>
  </div>
</div>

<!-- Proteins -->
<div class="category" id="cat-proteins">
  <h2>ğŸŸ Proteins <span class="badge">Pick up to 3</span></h2>
  <div class="options-grid" data-type="multi" data-max="3">
    <div class="option-card" data-value="Salmon"><span class="emoji">ğŸ£</span><span class="label">Salmon</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Tuna"><span class="emoji">ğŸŸ</span><span class="label">Tuna</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Shrimp Tempura"><span class="emoji">ğŸ¤</span><span class="label">Shrimp Tempura</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Crab Stick"><span class="emoji">ğŸ¦€</span><span class="label">Crab Stick</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Eel (Unagi)"><span class="emoji">ğŸ</span><span class="label">Eel (Unagi)</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Tofu"><span class="emoji">ğŸ§ˆ</span><span class="label">Tofu</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Chicken Teriyaki"><span class="emoji">ğŸ—</span><span class="label">Chicken Teriyaki</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Spicy Tuna"><span class="emoji">ğŸŒ¶ï¸</span><span class="label">Spicy Tuna</span><span class="checkmark">âœ“</span></div>
  </div>
</div>

<!-- Vegetables -->
<div class="category" id="cat-veggies">
  <h2>ğŸ¥‘ Vegetables & Fruits <span class="badge">Pick up to 4</span></h2>
  <div class="options-grid" data-type="multi" data-max="4">
    <div class="option-card" data-value="Avocado"><span class="emoji">ğŸ¥‘</span><span class="label">Avocado</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Cucumber"><span class="emoji">ğŸ¥’</span><span class="label">Cucumber</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Mango"><span class="emoji">ğŸ¥­</span><span class="label">Mango</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Cream Cheese"><span class="emoji">ğŸ§€</span><span class="label">Cream Cheese</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="JalapeÃ±o"><span class="emoji">ğŸŒ¶ï¸</span><span class="label">JalapeÃ±o</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Sweet Potato"><span class="emoji">ğŸ </span><span class="label">Sweet Potato</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Pickled Radish"><span class="emoji">ğŸ©·</span><span class="label">Pickled Radish</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Asparagus"><span class="emoji">ğŸŒ±</span><span class="label">Asparagus</span><span class="checkmark">âœ“</span></div>
  </div>
</div>

<!-- Toppings -->
<div class="category" id="cat-toppings">
  <h2>âœ¨ Toppings <span class="badge">Pick up to 3</span></h2>
  <div class="options-grid" data-type="multi" data-max="3">
    <div class="option-card" data-value="Sesame Seeds"><span class="emoji">âšª</span><span class="label">Sesame Seeds</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Tempura Flakes"><span class="emoji">ğŸŸ¡</span><span class="label">Tempura Flakes</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Crispy Onion"><span class="emoji">ğŸ§…</span><span class="label">Crispy Onion</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Tobiko (Fish Roe)"><span class="emoji">ğŸ”´</span><span class="label">Tobiko (Fish Roe)</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Green Onion"><span class="emoji">ğŸŸ¢</span><span class="label">Green Onion</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Furikake"><span class="emoji">ğŸŒˆ</span><span class="label">Furikake</span><span class="checkmark">âœ“</span></div>
  </div>
</div>

<!-- Sauces -->
<div class="category" id="cat-sauces">
  <h2>ğŸ¥« Sauces <span class="badge">Pick up to 2</span></h2>
  <div class="options-grid" data-type="multi" data-max="2">
    <div class="option-card" data-value="Soy Sauce"><span class="emoji">ğŸ«—</span><span class="label">Soy Sauce</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Spicy Mayo"><span class="emoji">ğŸŒ¶ï¸</span><span class="label">Spicy Mayo</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Eel Sauce"><span class="emoji">ğŸ¯</span><span class="label">Eel Sauce</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Sriracha"><span class="emoji">ğŸ”¥</span><span class="label">Sriracha</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Ponzu"><span class="emoji">ğŸ‹</span><span class="label">Ponzu</span><span class="checkmark">âœ“</span></div>
    <div class="option-card" data-value="Wasabi"><span class="emoji">ğŸŸ©</span><span class="label">Wasabi</span><span class="checkmark">âœ“</span></div>
  </div>
</div>

<!-- Submit -->
<div class="submit-section">
  <button class="submit-btn" id="submitBtn" onclick="submitOrder()">
    <span class="btn-text">ğŸ£ Submit My Roll!</span>
    <span class="spinner"></span>
  </button>
</div>

<!-- Confirmation Overlay -->
<div class="overlay" id="overlay">
  <div class="confirm-box">
    <h2>ğŸ‰ Order Submitted!</h2>
    <div class="order-detail" id="orderDetail"></div>
    <div class="status-msg" id="statusMsg"></div>
    <button class="close-btn" onclick="closeOverlay()">Build Another Roll</button>
  </div>
</div>

<script>
  // ============================================================
  // ğŸ”½ PASTE YOUR GOOGLE APPS SCRIPT WEB APP URL BELOW ğŸ”½
  const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzRvns7KvWN_X2zvqT6_3-auA47rTI_QZEr0B9wB3VnRhSSvWt7ujxaQj9ubEsNzAdF/exec";
  // ============================================================

  // Selection logic
  document.querySelectorAll('.options-grid').forEach(grid => {
    const type = grid.dataset.type;
    const max = parseInt(grid.dataset.max) || 1;

    grid.querySelectorAll('.option-card').forEach(card => {
      card.addEventListener('click', () => {
        if (type === 'single') {
          grid.querySelectorAll('.option-card').forEach(c => c.classList.remove('selected'));
          card.classList.add('selected');
        } else {
          if (card.classList.contains('selected')) {
            card.classList.remove('selected');
          } else {
            const selected = grid.querySelectorAll('.option-card.selected').length;
            if (selected < max) {
              card.classList.add('selected');
            } else {
              // Quick shake animation
              card.style.animation = 'none';
              card.offsetHeight;
              card.style.animation = 'shake 0.3s ease';
            }
          }
        }
      });
    });
  });

  // Shake animation
  const style = document.createElement('style');
  style.textContent = `@keyframes shake { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-5px)} 75%{transform:translateX(5px)} }`;
  document.head.appendChild(style);

  function getSelections(categoryId) {
    const grid = document.querySelector(`#${categoryId} .options-grid`);
    return Array.from(grid.querySelectorAll('.option-card.selected')).map(c => c.dataset.value);
  }

  async function submitOrder() {
    const name = document.getElementById('studentName').value.trim();
    const rice = getSelections('cat-rice');
    const wrap = getSelections('cat-wrap');
    const proteins = getSelections('cat-proteins');
    const veggies = getSelections('cat-veggies');
    const toppings = getSelections('cat-toppings');
    const sauces = getSelections('cat-sauces');

    // Validation
    if (!name) { alert("Please enter your name!"); return; }
    if (rice.length === 0) { alert("Please pick a rice option!"); return; }
    if (wrap.length === 0) { alert("Please pick a wrap!"); return; }
    if (proteins.length === 0) { alert("Please pick at least one protein!"); return; }

    const order = {
      name: name,
      rice: rice.join(', '),
      wrap: wrap.join(', '),
      proteins: proteins.join(', '),
      vegetables: veggies.join(', ') || 'None',
      toppings: toppings.join(', ') || 'None',
      sauces: sauces.join(', ') || 'None'
    };

    // Show confirmation immediately
    const detail = document.getElementById('orderDetail');
    detail.innerHTML = `
      <span class="label">Name:</span> ${order.name}<br>
      <span class="label">Rice:</span> ${order.rice}<br>
      <span class="label">Wrap:</span> ${order.wrap}<br>
      <span class="label">Proteins:</span> ${order.proteins}<br>
      <span class="label">Vegetables:</span> ${order.vegetables}<br>
      <span class="label">Toppings:</span> ${order.toppings}<br>
      <span class="label">Sauces:</span> ${order.sauces}
    `;

    const statusMsg = document.getElementById('statusMsg');
    statusMsg.textContent = 'â³ Sending to order sheet...';
    statusMsg.className = 'status-msg';

    document.getElementById('overlay').classList.add('active');

    // Show loading state on button
    const btn = document.getElementById('submitBtn');
    btn.classList.add('loading');
    btn.disabled = true;

    // Send to Google Sheets
    try {
      const response = await fetch(GOOGLE_SCRIPT_URL, {
        method: 'POST',
        mode: 'no-cors',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(order)
      });

      statusMsg.textContent = 'âœ… Order sent to the sheet successfully!';
      statusMsg.className = 'status-msg';
    } catch (error) {
      console.error('Error:', error);
      statusMsg.textContent = 'âš ï¸ Could not reach the sheet, but your order is shown above.';
      statusMsg.className = 'status-msg error';
    }

    btn.classList.remove('loading');
    btn.disabled = false;
  }

  function closeOverlay() {
    document.getElementById('overlay').classList.remove('active');
    // Reset form
    document.getElementById('studentName').value = '';
    document.querySelectorAll('.option-card.selected').forEach(c => c.classList.remove('selected'));
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }
</script>

</body>
</html>